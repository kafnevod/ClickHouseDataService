# Предложения по структуре таблиц Clickouse

В большинстве случаев при обработке больших объемов потоковых (TimeSeries) потоков данных
мы имеем дело с одной большой потоковой таблицей к которой необходимо производить поисковые или аггрегаионные
аналитические запросы. 
Часто для этих запросов необходимо производить операции соединения (JOIN) со справочными таблицами для включения в запрос 
полей справочных таблиц для поиска по ним или аггрегации.

Данные операции довольно затратны как по времени выполнения, так и по оперативной памяти.

Так как столбцовые базы данных показывают отличную производительность на "широких" таблицах
предлагается создать "широкую" деномализованную таблицу в которую включить как 
основную потоковую информацию так и поля из справочных таблиц по которым производятся поисковые и аггрегационные запросы.

В этом случае основные запросы будет производиться без операции JOIN.

На онове данной "широкой" деномализованной таблицы дял доступа к разного типа информации (информации от рахного типа источников со своим набором полей) можно создать необходимое число представлений (View) к которым и поизводить  обращение из приложений.



## Широкая Большая таблица

grzevents_BigTable | analythicevents | ФотофиксацияТС  
-------------------|-----------------|----------------
primarykey | ✗ | primarykey
createtime | ✗ | createtime
creator | typeid | creator
edittime | ✗ | edittime
editor | ✗ | editor
ОграничениеСкорости | ✗ | ОграничениеСкорости
НомерТС | grz | НомерТС
Скорость | speed | Скорость
ОграничениеСкорости | ✗ |  ОграничениеСкорости
ИдентификаторМатериала | ✗ |  ИдентификаторМатериала
Время | timestamp | Время
ДатаПоступления| ✗ |  ДатаПоступления
Получатель| ✗ |  Получатель
ТранспортноеСредство| ✗ |  ТранспортноеСредство
Источник| ✗ |  Получатель
x | ✗ |  x
y| ✗ |  y
ГруппаФакта| ✗ |  ГруппаФакта
vehicletypetext| ✗ |  vehicletypetext
vehiclecolortext | ✗ |  vehiclecolortext
vehiclebrandtext| ✗ |  vehiclebrandtext
vehiclemodeltext| ✗ |  vehiclemodeltext




## Импортирование табли Postgres как слоаварей Clixkouse
